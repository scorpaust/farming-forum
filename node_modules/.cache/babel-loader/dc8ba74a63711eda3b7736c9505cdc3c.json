{"remainingRequest":"C:\\dev\\farming-forum\\node_modules\\babel-loader\\lib\\index.js!C:\\dev\\farming-forum\\node_modules\\eslint-loader\\index.js??ref--14-0!C:\\dev\\farming-forum\\src\\store\\mutations.js","dependencies":[{"path":"C:\\dev\\farming-forum\\src\\store\\mutations.js","mtime":1639337024826},{"path":"C:\\dev\\farming-forum\\babel.config.js","mtime":1638558199793},{"path":"C:\\dev\\farming-forum\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\dev\\farming-forum\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\dev\\farming-forum\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuaW5jbHVkZXMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuaW5jbHVkZXMuanMiOwppbXBvcnQgeyBkb2NUb1Jlc291cmNlLCBmaW5kQnlJZCwgdXBzZXJ0IH0gZnJvbSAiQC9oZWxwZXJzIjsKZXhwb3J0IGRlZmF1bHQgewogIHNldEl0ZW06IGZ1bmN0aW9uIHNldEl0ZW0oc3RhdGUsIF9yZWYpIHsKICAgIHZhciByZXNvdXJjZSA9IF9yZWYucmVzb3VyY2UsCiAgICAgICAgaXRlbSA9IF9yZWYuaXRlbTsKICAgIHVwc2VydChzdGF0ZVtyZXNvdXJjZV0sIGRvY1RvUmVzb3VyY2UoaXRlbSkpOwogIH0sCiAgYXBwZW5kVW5zdWJzY3JpYmU6IGZ1bmN0aW9uIGFwcGVuZFVuc3Vic2NyaWJlKHN0YXRlLCBfcmVmMikgewogICAgdmFyIHVuc3Vic2NyaWJlID0gX3JlZjIudW5zdWJzY3JpYmU7CiAgICBzdGF0ZS51bnN1YnNjcmliZXMucHVzaCh1bnN1YnNjcmliZSk7CiAgfSwKICBjbGVhckFsbFVuc3Vic2NyaWJlczogZnVuY3Rpb24gY2xlYXJBbGxVbnN1YnNjcmliZXMoc3RhdGUpIHsKICAgIHN0YXRlLnVuc3Vic2NyaWJlcyA9IFtdOwogIH0sCiAgYXBwZW5kUG9zdFRvVGhyZWFkOiBtYWtlQXBwZW5kQ2hpbGRUb1BhcmVudE11dGF0aW9uKHsKICAgIHBhcmVudDogJ3RocmVhZHMnLAogICAgY2hpbGQ6ICdwb3N0cycKICB9KSwKICBhcHBlbmRUaHJlYWRUb0ZvcnVtOiBtYWtlQXBwZW5kQ2hpbGRUb1BhcmVudE11dGF0aW9uKHsKICAgIHBhcmVudDogJ2ZvcnVtcycsCiAgICBjaGlsZDogJ3RocmVhZHMnCiAgfSksCiAgYXBwZW5kVGhyZWFkVG9Vc2VyOiBtYWtlQXBwZW5kQ2hpbGRUb1BhcmVudE11dGF0aW9uKHsKICAgIHBhcmVudDogJ3VzZXJzJywKICAgIGNoaWxkOiAndGhyZWFkcycKICB9KSwKICBhcHBlbmRDb250cmlidXRvclRvVGhyZWFkOiBtYWtlQXBwZW5kQ2hpbGRUb1BhcmVudE11dGF0aW9uKHsKICAgIHBhcmVudDogJ3RocmVhZHMnLAogICAgY2hpbGQ6ICdjb250cmlidXRvcnMnCiAgfSkKfTsKCmZ1bmN0aW9uIG1ha2VBcHBlbmRDaGlsZFRvUGFyZW50TXV0YXRpb24oX3JlZjMpIHsKICB2YXIgcGFyZW50ID0gX3JlZjMucGFyZW50LAogICAgICBjaGlsZCA9IF9yZWYzLmNoaWxkOwogIHJldHVybiBmdW5jdGlvbiAoc3RhdGUsIF9yZWY0KSB7CiAgICB2YXIgY2hpbGRJZCA9IF9yZWY0LmNoaWxkSWQsCiAgICAgICAgcGFyZW50SWQgPSBfcmVmNC5wYXJlbnRJZDsKICAgIHZhciByZXNvdXJjZSA9IGZpbmRCeUlkKHN0YXRlW3BhcmVudF0sIHBhcmVudElkKTsKCiAgICBpZiAoIXJlc291cmNlKSB7CiAgICAgIGNvbnNvbGUud2FybigiQXBwZW5kaW5nICIuY29uY2F0KGNoaWxkLCAiICIpLmNvbmNhdChjaGlsZElkLCAiIHRvICIpLmNvbmNhdChwYXJlbnQsICIgIikuY29uY2F0KHBhcmVudElkLCAiIGZhaWxlZCBiZWNhdXNlIHRoZSBwYXJlbnQgZGlkbid0IGV4aXN0IikpOwogICAgICByZXR1cm47CiAgICB9CgogICAgcmVzb3VyY2VbY2hpbGRdID0gcmVzb3VyY2VbY2hpbGRdIHx8IFtdOwoKICAgIGlmICghcmVzb3VyY2VbY2hpbGRdLmluY2x1ZGVzKGNoaWxkSWQpKSB7CiAgICAgIHJlc291cmNlW2NoaWxkXS5wdXNoKGNoaWxkSWQpOwogICAgfQogIH07Cn0="},{"version":3,"sources":["C:/dev/farming-forum/src/store/mutations.js"],"names":["docToResource","findById","upsert","setItem","state","resource","item","appendUnsubscribe","unsubscribe","unsubscribes","push","clearAllUnsubscribes","appendPostToThread","makeAppendChildToParentMutation","parent","child","appendThreadToForum","appendThreadToUser","appendContributorToThread","childId","parentId","console","warn","includes"],"mappings":";;;AAAA,SAASA,aAAT,EAAwBC,QAAxB,EAAkCC,MAAlC,QAAgD,WAAhD;AAEA,eAAe;AACXC,EAAAA,OADW,mBACHC,KADG,QACsB;AAAA,QAAjBC,QAAiB,QAAjBA,QAAiB;AAAA,QAAPC,IAAO,QAAPA,IAAO;AAC/BJ,IAAAA,MAAM,CAACE,KAAK,CAACC,QAAD,CAAN,EAAkBL,aAAa,CAACM,IAAD,CAA/B,CAAN;AACD,GAHU;AAIXC,EAAAA,iBAJW,6BAIOH,KAJP,SAI6B;AAAA,QAAdI,WAAc,SAAdA,WAAc;AACtCJ,IAAAA,KAAK,CAACK,YAAN,CAAmBC,IAAnB,CAAwBF,WAAxB;AACD,GANU;AAOXG,EAAAA,oBAPW,gCAOUP,KAPV,EAOiB;AAC1BA,IAAAA,KAAK,CAACK,YAAN,GAAqB,EAArB;AACD,GATU;AAUXG,EAAAA,kBAAkB,EAAEC,+BAA+B,CAAC;AAACC,IAAAA,MAAM,EAAE,SAAT;AAAoBC,IAAAA,KAAK,EAAE;AAA3B,GAAD,CAVxC;AAWXC,EAAAA,mBAAmB,EAAEH,+BAA+B,CAAC;AAACC,IAAAA,MAAM,EAAE,QAAT;AAAmBC,IAAAA,KAAK,EAAE;AAA1B,GAAD,CAXzC;AAYXE,EAAAA,kBAAkB,EAAEJ,+BAA+B,CAAC;AAACC,IAAAA,MAAM,EAAE,OAAT;AAAkBC,IAAAA,KAAK,EAAE;AAAzB,GAAD,CAZxC;AAaXG,EAAAA,yBAAyB,EAAEL,+BAA+B,CAAC;AAAEC,IAAAA,MAAM,EAAE,SAAV;AAAqBC,IAAAA,KAAK,EAAE;AAA5B,GAAD;AAb/C,CAAf;;AAgBA,SAASF,+BAAT,QAA6D;AAAA,MAAjBC,MAAiB,SAAjBA,MAAiB;AAAA,MAATC,KAAS,SAATA,KAAS;AAC3D,SAAO,UAACX,KAAD,SAAkC;AAAA,QAAxBe,OAAwB,SAAxBA,OAAwB;AAAA,QAAfC,QAAe,SAAfA,QAAe;AACvC,QAAMf,QAAQ,GAAGJ,QAAQ,CAACG,KAAK,CAACU,MAAD,CAAN,EAAgBM,QAAhB,CAAzB;;AACA,QAAI,CAACf,QAAL,EAAe;AACbgB,MAAAA,OAAO,CAACC,IAAR,qBAA0BP,KAA1B,cAAmCI,OAAnC,iBAAiDL,MAAjD,cAA2DM,QAA3D;AACA;AACD;;AACDf,IAAAA,QAAQ,CAACU,KAAD,CAAR,GAAkBV,QAAQ,CAACU,KAAD,CAAR,IAAmB,EAArC;;AACA,QAAI,CAACV,QAAQ,CAACU,KAAD,CAAR,CAAgBQ,QAAhB,CAAyBJ,OAAzB,CAAL,EAAwC;AACtCd,MAAAA,QAAQ,CAACU,KAAD,CAAR,CAAgBL,IAAhB,CAAqBS,OAArB;AACD;AACF,GAVD;AAWD","sourcesContent":["import { docToResource, findById, upsert } from \"@/helpers\"\r\n\r\nexport default {\r\n    setItem(state, {resource, item}) {\r\n      upsert(state[resource], docToResource(item))\r\n    },\r\n    appendUnsubscribe(state, {unsubscribe}) {\r\n      state.unsubscribes.push(unsubscribe)\r\n    },\r\n    clearAllUnsubscribes(state) {\r\n      state.unsubscribes = []\r\n    },\r\n    appendPostToThread: makeAppendChildToParentMutation({parent: 'threads', child: 'posts'}),\r\n    appendThreadToForum: makeAppendChildToParentMutation({parent: 'forums', child: 'threads' }),\r\n    appendThreadToUser: makeAppendChildToParentMutation({parent: 'users', child: 'threads'}),\r\n    appendContributorToThread: makeAppendChildToParentMutation({ parent: 'threads', child: 'contributors' })\r\n}\r\n\r\nfunction makeAppendChildToParentMutation ({ parent, child }) {\r\n  return (state, { childId, parentId }) => {\r\n    const resource = findById(state[parent], parentId)\r\n    if (!resource) {\r\n      console.warn(`Appending ${child} ${childId} to ${parent} ${parentId} failed because the parent didn't exist`)\r\n      return\r\n    }\r\n    resource[child] = resource[child] || []\r\n    if (!resource[child].includes(childId)) {\r\n      resource[child].push(childId)\r\n    }\r\n  }\r\n}"]}]}