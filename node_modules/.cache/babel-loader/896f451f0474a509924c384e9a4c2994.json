{"remainingRequest":"C:\\dev\\farming-forum\\node_modules\\babel-loader\\lib\\index.js!C:\\dev\\farming-forum\\node_modules\\eslint-loader\\index.js??ref--14-0!C:\\dev\\farming-forum\\src\\helpers\\index.js","dependencies":[{"path":"C:\\dev\\farming-forum\\src\\helpers\\index.js","mtime":1639937354074},{"path":"C:\\dev\\farming-forum\\babel.config.js","mtime":1638558199793},{"path":"C:\\dev\\farming-forum\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\dev\\farming-forum\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\dev\\farming-forum\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiQzpcXGRldlxcZmFybWluZy1mb3J1bVxcbm9kZV9tb2R1bGVzXFxAYmFiZWxcXHJ1bnRpbWVcXGhlbHBlcnNcXGVzbVxcb2JqZWN0U3ByZWFkMi5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZpbmQuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmluZC1pbmRleC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmNvbmNhdC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmluY2x1ZGVzLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLmluY2x1ZGVzLmpzIjsKZXhwb3J0IHZhciBmaW5kQnlJZCA9IGZ1bmN0aW9uIGZpbmRCeUlkKHJlc291cmNlcywgaWQpIHsKICBpZiAoIXJlc291cmNlcykgcmV0dXJuIG51bGw7CiAgcmV0dXJuIHJlc291cmNlcy5maW5kKGZ1bmN0aW9uIChyKSB7CiAgICByZXR1cm4gci5pZCA9PT0gaWQ7CiAgfSk7Cn07CmV4cG9ydCB2YXIgdXBzZXJ0ID0gZnVuY3Rpb24gdXBzZXJ0KHJlc291cmNlcywgcmVzb3VyY2UpIHsKICB2YXIgaW5kZXggPSByZXNvdXJjZXMuZmluZEluZGV4KGZ1bmN0aW9uIChwKSB7CiAgICByZXR1cm4gcC5pZCA9PT0gcmVzb3VyY2UuaWQ7CiAgfSk7CgogIGlmIChyZXNvdXJjZS5pZCAmJiBpbmRleCAhPT0gLTEpIHsKICAgIHJlc291cmNlc1tpbmRleF0gPSByZXNvdXJjZTsKICB9IGVsc2UgewogICAgcmVzb3VyY2VzLnB1c2gocmVzb3VyY2UpOwogIH0KfTsKZXhwb3J0IHZhciBkb2NUb1Jlc291cmNlID0gZnVuY3Rpb24gZG9jVG9SZXNvdXJjZShkb2MpIHsKICBpZiAodHlwZW9mIChkb2MgPT09IG51bGwgfHwgZG9jID09PSB2b2lkIDAgPyB2b2lkIDAgOiBkb2MuZGF0YSkgIT09ICdmdW5jdGlvbicpIHJldHVybiBkb2M7CiAgcmV0dXJuIF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgZG9jLmRhdGEoKSksIHt9LCB7CiAgICBpZDogZG9jLmlkCiAgfSk7Cn07CmV4cG9ydCB2YXIgbWFrZUFwcGVuZENoaWxkVG9QYXJlbnRNdXRhdGlvbiA9IGZ1bmN0aW9uIG1ha2VBcHBlbmRDaGlsZFRvUGFyZW50TXV0YXRpb24oX3JlZikgewogIHZhciBwYXJlbnQgPSBfcmVmLnBhcmVudCwKICAgICAgY2hpbGQgPSBfcmVmLmNoaWxkOwogIHJldHVybiBmdW5jdGlvbiAoc3RhdGUsIF9yZWYyKSB7CiAgICB2YXIgY2hpbGRJZCA9IF9yZWYyLmNoaWxkSWQsCiAgICAgICAgcGFyZW50SWQgPSBfcmVmMi5wYXJlbnRJZDsKICAgIHZhciByZXNvdXJjZSA9IGZpbmRCeUlkKHN0YXRlLml0ZW1zLCBwYXJlbnRJZCk7CgogICAgaWYgKCFyZXNvdXJjZSkgewogICAgICBjb25zb2xlLndhcm4oIkFwcGVuZGluZyAiLmNvbmNhdChjaGlsZCwgIiAiKS5jb25jYXQoY2hpbGRJZCwgIiB0byAiKS5jb25jYXQocGFyZW50LCAiICIpLmNvbmNhdChwYXJlbnRJZCwgIiBmYWlsZWQgYmVjYXVzZSB0aGUgcGFyZW50IGRpZG4ndCBleGlzdCIpKTsKICAgICAgcmV0dXJuOwogICAgfQoKICAgIHJlc291cmNlW2NoaWxkXSA9IHJlc291cmNlW2NoaWxkXSB8fCBbXTsKCiAgICBpZiAoIXJlc291cmNlW2NoaWxkXS5pbmNsdWRlcyhjaGlsZElkKSkgewogICAgICByZXNvdXJjZVtjaGlsZF0ucHVzaChjaGlsZElkKTsKICAgIH0KICB9Owp9Ow=="},{"version":3,"sources":["C:/dev/farming-forum/src/helpers/index.js"],"names":["findById","resources","id","find","r","upsert","resource","index","findIndex","p","push","docToResource","doc","data","makeAppendChildToParentMutation","parent","child","state","childId","parentId","items","console","warn","includes"],"mappings":";;;;;;;AAAA,OAAO,IAAMA,QAAQ,GAAG,SAAXA,QAAW,CAACC,SAAD,EAAYC,EAAZ,EAAmB;AACzC,MAAI,CAACD,SAAL,EAAgB,OAAO,IAAP;AAChB,SAAOA,SAAS,CAACE,IAAV,CAAe,UAAAC,CAAC;AAAA,WAAIA,CAAC,CAACF,EAAF,KAASA,EAAb;AAAA,GAAhB,CAAP;AACD,CAHM;AAKP,OAAO,IAAMG,MAAM,GAAG,SAATA,MAAS,CAACJ,SAAD,EAAYK,QAAZ,EAAyB;AAC7C,MAAMC,KAAK,GAAGN,SAAS,CAACO,SAAV,CAAoB,UAAAC,CAAC;AAAA,WAAIA,CAAC,CAACP,EAAF,KAASI,QAAQ,CAACJ,EAAtB;AAAA,GAArB,CAAd;;AACA,MAAII,QAAQ,CAACJ,EAAT,IAAeK,KAAK,KAAK,CAAC,CAA9B,EAAiC;AAC/BN,IAAAA,SAAS,CAACM,KAAD,CAAT,GAAmBD,QAAnB;AACD,GAFD,MAEO;AACLL,IAAAA,SAAS,CAACS,IAAV,CAAeJ,QAAf;AACD;AACF,CAPM;AASP,OAAO,IAAMK,aAAa,GAAG,SAAhBA,aAAgB,CAACC,GAAD,EAAS;AACpC,MAAI,QAAOA,GAAP,aAAOA,GAAP,uBAAOA,GAAG,CAAEC,IAAZ,MAAqB,UAAzB,EAAqC,OAAOD,GAAP;AACrC,yCACOA,GAAG,CAACC,IAAJ,EADP;AAEIX,IAAAA,EAAE,EAAEU,GAAG,CAACV;AAFZ;AAID,CANM;AAQP,OAAO,IAAMY,+BAA+B,GAAG,SAAlCA,+BAAkC,OAAuB;AAAA,MAApBC,MAAoB,QAApBA,MAAoB;AAAA,MAAZC,KAAY,QAAZA,KAAY;AACpE,SAAO,UAACC,KAAD,SAAkC;AAAA,QAAxBC,OAAwB,SAAxBA,OAAwB;AAAA,QAAfC,QAAe,SAAfA,QAAe;AACvC,QAAMb,QAAQ,GAAGN,QAAQ,CAACiB,KAAK,CAACG,KAAP,EAAcD,QAAd,CAAzB;;AACA,QAAI,CAACb,QAAL,EAAe;AACbe,MAAAA,OAAO,CAACC,IAAR,qBAA0BN,KAA1B,cAAmCE,OAAnC,iBAAiDH,MAAjD,cAA2DI,QAA3D;AACA;AACD;;AACDb,IAAAA,QAAQ,CAACU,KAAD,CAAR,GAAkBV,QAAQ,CAACU,KAAD,CAAR,IAAmB,EAArC;;AACA,QAAI,CAACV,QAAQ,CAACU,KAAD,CAAR,CAAgBO,QAAhB,CAAyBL,OAAzB,CAAL,EAAwC;AACtCZ,MAAAA,QAAQ,CAACU,KAAD,CAAR,CAAgBN,IAAhB,CAAqBQ,OAArB;AACD;AACF,GAVD;AAWD,CAZM","sourcesContent":["export const findById = (resources, id) => {\r\n  if (!resources) return null\r\n  return resources.find(r => r.id === id)\r\n}\r\n\r\nexport const upsert = (resources, resource) => {\r\n  const index = resources.findIndex(p => p.id === resource.id)\r\n  if (resource.id && index !== -1) {\r\n    resources[index] = resource\r\n  } else {\r\n    resources.push(resource)\r\n  }\r\n}\r\n\r\nexport const docToResource = (doc) => {\r\n  if (typeof doc?.data !== 'function') return doc  \r\n  return {\r\n      ...doc.data(),\r\n      id: doc.id\r\n    }\r\n}\r\n\r\nexport const makeAppendChildToParentMutation = ({ parent, child }) => {\r\n  return (state, { childId, parentId }) => {\r\n    const resource = findById(state.items, parentId)\r\n    if (!resource) {\r\n      console.warn(`Appending ${child} ${childId} to ${parent} ${parentId} failed because the parent didn't exist`)\r\n      return\r\n    }\r\n    resource[child] = resource[child] || []\r\n    if (!resource[child].includes(childId)) {\r\n      resource[child].push(childId)\r\n    }\r\n  }\r\n}"]}]}