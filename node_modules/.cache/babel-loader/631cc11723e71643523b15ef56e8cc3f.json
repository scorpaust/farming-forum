{"remainingRequest":"C:\\dev\\farming-forum\\node_modules\\babel-loader\\lib\\index.js!C:\\dev\\farming-forum\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!C:\\dev\\farming-forum\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader-v16\\dist\\index.js??ref--1-1!C:\\dev\\farming-forum\\src\\pages\\ThreadEdit.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\dev\\farming-forum\\src\\pages\\ThreadEdit.vue","mtime":1639940803896},{"path":"C:\\dev\\farming-forum\\babel.config.js","mtime":1638558199793},{"path":"C:\\dev\\farming-forum\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\dev\\farming-forum\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\dev\\farming-forum\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\dev\\farming-forum\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkM6XFxkZXZcXGZhcm1pbmctZm9ydW1cXG5vZGVfbW9kdWxlc1xcQGJhYmVsXFxydW50aW1lXFxoZWxwZXJzXFxlc21cXGFzeW5jVG9HZW5lcmF0b3IuanMiOwppbXBvcnQgX29iamVjdFNwcmVhZCBmcm9tICJDOlxcZGV2XFxmYXJtaW5nLWZvcnVtXFxub2RlX21vZHVsZXNcXEBiYWJlbFxccnVudGltZVxcaGVscGVyc1xcZXNtXFxvYmplY3RTcHJlYWQyLmpzIjsKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUuanMiOwppbXBvcnQgVGhyZWFkRWRpdG9yIGZyb20gIkAvY29tcG9uZW50cy9UaHJlYWRFZGl0b3IiOwppbXBvcnQgeyBmaW5kQnlJZCB9IGZyb20gIkAvaGVscGVycyI7CmltcG9ydCB7IG1hcEFjdGlvbnMgfSBmcm9tICJ2dWV4IjsKaW1wb3J0IGFzeW5jRGF0YVN0YXR1cyBmcm9tICJAL21peGlucy9hc3luY0RhdGFTdGF0dXMiOwpleHBvcnQgZGVmYXVsdCB7CiAgY29tcG9uZW50czogewogICAgVGhyZWFkRWRpdG9yOiBUaHJlYWRFZGl0b3IKICB9LAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBmb3JtSXNEaXJ0eTogZmFsc2UKICAgIH07CiAgfSwKICBwcm9wczogewogICAgaWQ6IHsKICAgICAgdHlwZTogU3RyaW5nLAogICAgICByZXF1aXJlZDogdHJ1ZQogICAgfQogIH0sCiAgbWl4aW5zOiBbYXN5bmNEYXRhU3RhdHVzXSwKICBjb21wdXRlZDogewogICAgdGhyZWFkOiBmdW5jdGlvbiB0aHJlYWQoKSB7CiAgICAgIHJldHVybiBmaW5kQnlJZCh0aGlzLiRzdG9yZS5zdGF0ZS50aHJlYWRzLml0ZW1zLCB0aGlzLmlkKTsKICAgIH0sCiAgICB0ZXh0OiBmdW5jdGlvbiB0ZXh0KCkgewogICAgICB2YXIgcG9zdCA9IGZpbmRCeUlkKHRoaXMuJHN0b3JlLnN0YXRlLnBvc3RzLml0ZW1zLCB0aGlzLnRocmVhZC5wb3N0c1swXSk7CiAgICAgIHJldHVybiBwb3N0ID8gcG9zdC50ZXh0IDogIiI7CiAgICB9CiAgfSwKICBtZXRob2RzOiBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgbWFwQWN0aW9ucygidGhyZWFkcyIsIFsidXBkYXRlVGhyZWFkIiwgImZldGNoVGhyZWFkIl0pKSwgbWFwQWN0aW9ucygicG9zdHMiLCBbImZldGNoUG9zdCJdKSksIHt9LCB7CiAgICBzYXZlOiBmdW5jdGlvbiBzYXZlKF9yZWYpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7CiAgICAgICAgdmFyIHRpdGxlLCB0ZXh0LCB0aHJlYWQ7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgdGl0bGUgPSBfcmVmLnRpdGxlLCB0ZXh0ID0gX3JlZi50ZXh0OwogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDM7CiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMudXBkYXRlVGhyZWFkKHsKICAgICAgICAgICAgICAgICAgaWQ6IF90aGlzLmlkLAogICAgICAgICAgICAgICAgICB0aXRsZTogdGl0bGUsCiAgICAgICAgICAgICAgICAgIHRleHQ6IHRleHQKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgICB0aHJlYWQgPSBfY29udGV4dC5zZW50OwoKICAgICAgICAgICAgICAgIF90aGlzLiRyb3V0ZXIucHVzaCh7CiAgICAgICAgICAgICAgICAgIG5hbWU6ICJUaHJlYWRTaG93IiwKICAgICAgICAgICAgICAgICAgcGFyYW1zOiB7CiAgICAgICAgICAgICAgICAgICAgaWQ6IHRocmVhZC5pZAogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZSk7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIGNhbmNlbDogZnVuY3Rpb24gY2FuY2VsKCkgewogICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7CiAgICAgICAgbmFtZTogIlRocmVhZFNob3ciLAogICAgICAgIHBhcmFtczogewogICAgICAgICAgaWQ6IHRoaXMuaWQKICAgICAgICB9CiAgICAgIH0pOwogICAgfQogIH0pLAogIGNyZWF0ZWQ6IGZ1bmN0aW9uIGNyZWF0ZWQoKSB7CiAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMigpIHsKICAgICAgdmFyIHRocmVhZDsKICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUyJChfY29udGV4dDIpIHsKICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgc3dpdGNoIChfY29udGV4dDIucHJldiA9IF9jb250ZXh0Mi5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDI7CiAgICAgICAgICAgICAgcmV0dXJuIF90aGlzMi5mZXRjaFRocmVhZCh7CiAgICAgICAgICAgICAgICBpZDogX3RoaXMyLmlkCiAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgdGhyZWFkID0gX2NvbnRleHQyLnNlbnQ7CiAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSA1OwogICAgICAgICAgICAgIHJldHVybiBfdGhpczIuZmV0Y2hQb3N0KHsKICAgICAgICAgICAgICAgIGlkOiB0aHJlYWQucG9zdHNbMF0KICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgICBfdGhpczIuYXN5bmNEYXRhU3RhdHVzX2ZldGNoZWQoKTsKCiAgICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sIF9jYWxsZWUyKTsKICAgIH0pKSgpOwogIH0sCiAgYmVmb3JlUm91dGVMZWF2ZTogZnVuY3Rpb24gYmVmb3JlUm91dGVMZWF2ZSgpIHsKICAgIGlmICh0aGlzLmZvcm1Jc0RpcnR5KSB7CiAgICAgIHZhciBjb25maXJtZWQgPSB3aW5kb3cuY29uZmlybSgiQXJlIHlvdSBzdXJlIHlvdSB3YW50IHRvIGxlYXZlPyBVbnNhdmVkIGNoYW5nZXMgd2lsbCBiZSBsb3N0ISIpOwogICAgICBpZiAoIWNvbmZpcm1lZCkgcmV0dXJuIGZhbHNlOwogICAgfQogIH0KfTs="},{"version":3,"sources":["C:\\dev\\farming-forum\\src\\pages\\ThreadEdit.vue"],"names":[],"mappings":";;;AAiBC,OAAO,YAAP,MAAyB,2BAAzB;AACA,SAAS,QAAT,QAAyB,WAAzB;AACA,SAAS,UAAT,QAA2B,MAA3B;AACA,OAAO,eAAP,MAA4B,0BAA5B;AAEA,eAAe;AACd,EAAA,UAAU,EAAE;AAAE,IAAA,YAAW,EAAX;AAAF,GADE;AAEd,EAAA,IAFc,kBAEP;AACN,WAAO;AACN,MAAA,WAAW,EAAE;AADP,KAAP;AAGA,GANa;AAOd,EAAA,KAAK,EAAE;AACN,IAAA,EAAE,EAAE;AAAE,MAAA,IAAI,EAAE,MAAR;AAAgB,MAAA,QAAQ,EAAE;AAA1B;AADE,GAPO;AAUd,EAAA,MAAM,EAAE,CAAC,eAAD,CAVM;AAWd,EAAA,QAAQ,EAAE;AACT,IAAA,MADS,oBACA;AACR,aAAO,QAAQ,CAAC,KAAK,MAAL,CAAY,KAAZ,CAAkB,OAAlB,CAA0B,KAA3B,EAAkC,KAAK,EAAvC,CAAf;AACA,KAHQ;AAIT,IAAA,IAJS,kBAIF;AACN,UAAM,IAAG,GAAI,QAAQ,CACpB,KAAK,MAAL,CAAY,KAAZ,CAAkB,KAAlB,CAAwB,KADJ,EAEpB,KAAK,MAAL,CAAY,KAAZ,CAAkB,CAAlB,CAFoB,CAArB;AAIA,aAAO,IAAG,GAAI,IAAI,CAAC,IAAT,GAAgB,EAA1B;AACA;AAVQ,GAXI;AAuBd,EAAA,OAAO,gDACH,UAAU,CAAC,SAAD,EAAY,CAAC,cAAD,EAAiB,aAAjB,CAAZ,CADP,GAEH,UAAU,CAAC,OAAD,EAAU,CAAC,WAAD,CAAV,CAFP;AAGA,IAAA,IAHA,sBAGsB;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAf,gBAAA,KAAe,QAAf,KAAe,EAAR,IAAQ,QAAR,IAAQ;AAAA;AAAA,uBACN,KAAI,CAAC,YAAL,CAAkB;AACtC,kBAAA,EAAE,EAAE,KAAI,CAAC,EAD6B;AAEtC,kBAAA,KAAK,EAAL,KAFsC;AAGtC,kBAAA,IAAI,EAAJ;AAHsC,iBAAlB,CADM;;AAAA;AACrB,gBAAA,MADqB;;AAM3B,gBAAA,KAAI,CAAC,OAAL,CAAa,IAAb,CAAkB;AAAE,kBAAA,IAAI,EAAE,YAAR;AAAsB,kBAAA,MAAM,EAAE;AAAE,oBAAA,EAAE,EAAE,MAAM,CAAC;AAAb;AAA9B,iBAAlB;;AAN2B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAO3B,KAVK;AAWN,IAAA,MAXM,oBAWG;AACR,WAAK,OAAL,CAAa,IAAb,CAAkB;AAAE,QAAA,IAAI,EAAE,YAAR;AAAsB,QAAA,MAAM,EAAE;AAAE,UAAA,EAAE,EAAE,KAAK;AAAX;AAA9B,OAAlB;AACA;AAbK,IAvBO;AAsCR,EAAA,OAtCQ,qBAsCE;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBACM,MAAI,CAAC,WAAL,CAAiB;AAAE,gBAAA,EAAE,EAAE,MAAI,CAAC;AAAX,eAAjB,CADN;;AAAA;AACT,cAAA,MADS;AAAA;AAAA,qBAET,MAAI,CAAC,SAAL,CAAe;AAAE,gBAAA,EAAE,EAAE,MAAM,CAAC,KAAP,CAAa,CAAb;AAAN,eAAf,CAFS;;AAAA;AAGf,cAAA,MAAI,CAAC,uBAAL;;AAHe;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIf,GA1Ca;AA2Cd,EAAA,gBA3Cc,8BA2CK;AAClB,QAAI,KAAK,WAAT,EAAsB;AACrB,UAAM,SAAQ,GAAI,MAAM,CAAC,OAAP,CACjB,+DADiB,CAAlB;AAGA,UAAI,CAAC,SAAL,EAAgB,OAAO,KAAP;AACjB;AACA;AAlDa,CAAf","sourcesContent":["<template>\r\n\t<div v-if=\"asyncDataStatus_ready\" class=\"col-full push-top\">\r\n\t\t<h1>\r\n\t\t\tEditing <i>{{ thread.title }}</i>\r\n\t\t</h1>\r\n\r\n\t\t<thread-editor\r\n\t\t\t:title=\"thread.title\"\r\n\t\t\t:text=\"text\"\r\n\t\t\t@save=\"save\"\r\n\t\t\t@cancel=\"cancel\"\r\n\t\t\t@dirty=\"formIsDirty = true\"\r\n\t\t\t@clean=\"formIsDirty = false\"\r\n\t\t/>\r\n\t</div>\r\n</template>\r\n<script>\r\n\timport ThreadEditor from \"@/components/ThreadEditor\";\r\n\timport { findById } from \"@/helpers\";\r\n\timport { mapActions } from \"vuex\";\r\n\timport asyncDataStatus from \"@/mixins/asyncDataStatus\";\r\n\r\n\texport default {\r\n\t\tcomponents: { ThreadEditor },\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tformIsDirty: false,\r\n\t\t\t};\r\n\t\t},\r\n\t\tprops: {\r\n\t\t\tid: { type: String, required: true },\r\n\t\t},\r\n\t\tmixins: [asyncDataStatus],\r\n\t\tcomputed: {\r\n\t\t\tthread() {\r\n\t\t\t\treturn findById(this.$store.state.threads.items, this.id);\r\n\t\t\t},\r\n\t\t\ttext() {\r\n\t\t\t\tconst post = findById(\r\n\t\t\t\t\tthis.$store.state.posts.items,\r\n\t\t\t\t\tthis.thread.posts[0]\r\n\t\t\t\t);\r\n\t\t\t\treturn post ? post.text : \"\";\r\n\t\t\t},\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\t...mapActions(\"threads\", [\"updateThread\", \"fetchThread\"]),\r\n\t\t\t...mapActions(\"posts\", [\"fetchPost\"]),\r\n\t\t\tasync save({ title, text }) {\r\n\t\t\t\tconst thread = await this.updateThread({\r\n\t\t\t\t\tid: this.id,\r\n\t\t\t\t\ttitle,\r\n\t\t\t\t\ttext,\r\n\t\t\t\t});\r\n\t\t\t\tthis.$router.push({ name: \"ThreadShow\", params: { id: thread.id } });\r\n\t\t\t},\r\n\t\t\tcancel() {\r\n\t\t\t\tthis.$router.push({ name: \"ThreadShow\", params: { id: this.id } });\r\n\t\t\t},\r\n\t\t},\r\n\t\tasync created() {\r\n\t\t\tconst thread = await this.fetchThread({ id: this.id });\r\n\t\t\tawait this.fetchPost({ id: thread.posts[0] });\r\n\t\t\tthis.asyncDataStatus_fetched();\r\n\t\t},\r\n\t\tbeforeRouteLeave() {\r\n\t\t\tif (this.formIsDirty) {\r\n\t\t\t\tconst confirmed = window.confirm(\r\n\t\t\t\t\t\"Are you sure you want to leave? Unsaved changes will be lost!\"\r\n\t\t\t\t);\r\n\t\t\t\tif (!confirmed) return false;\r\n\t\t\t}\r\n\t\t},\r\n\t};\r\n</script>"],"sourceRoot":""}]}