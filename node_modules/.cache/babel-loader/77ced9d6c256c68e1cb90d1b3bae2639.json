{"remainingRequest":"C:\\dev\\farming-forum\\node_modules\\babel-loader\\lib\\index.js!C:\\dev\\farming-forum\\node_modules\\eslint-loader\\index.js??ref--14-0!C:\\dev\\farming-forum\\src\\store\\modules\\auth.js","dependencies":[{"path":"C:\\dev\\farming-forum\\src\\store\\modules\\auth.js","mtime":1640012604893},{"path":"C:\\dev\\farming-forum\\babel.config.js","mtime":1638558199793},{"path":"C:\\dev\\farming-forum\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\dev\\farming-forum\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\dev\\farming-forum\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkM6XFxkZXZcXGZhcm1pbmctZm9ydW1cXG5vZGVfbW9kdWxlc1xcQGJhYmVsXFxydW50aW1lXFxoZWxwZXJzXFxlc21cXGFzeW5jVG9HZW5lcmF0b3IuanMiOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5mdW5jdGlvbi5uYW1lLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5mb3ItZWFjaC5qcyI7CmltcG9ydCB7IEdvb2dsZUF1dGhQcm92aWRlciwgY3JlYXRlVXNlcldpdGhFbWFpbEFuZFBhc3N3b3JkLCBnZXRBdXRoLCBzaWduSW5XaXRoRW1haWxBbmRQYXNzd29yZCBhcyBfc2lnbkluV2l0aEVtYWlsQW5kUGFzc3dvcmQsIHNpZ25JbldpdGhQb3B1cCB9IGZyb20gImZpcmViYXNlL2F1dGgiOwppbXBvcnQgeyBjb2xsZWN0aW9uLCBkb2MsIGdldERvYywgZ2V0RG9jcywgbGltaXQsIG9yZGVyQnksIHF1ZXJ5LCBzdGFydEFmdGVyLCB3aGVyZSB9IGZyb20gImZpcmViYXNlL2ZpcmVzdG9yZSI7CmltcG9ydCB7IGRiIH0gZnJvbSAnLi4vLi4vbWFpbic7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lc3BhY2VkOiB0cnVlLAogIHN0YXRlOiB7CiAgICBhdXRoSWQ6IG51bGwsCiAgICBhdXRoVXNlclVuc3Vic2NyaWJlOiBudWxsLAogICAgYXV0aE9ic2VydmVyVW5zdWJzY3JpYmU6IG51bGwKICB9LAogIGdldHRlcnM6IHsKICAgIGF1dGhVc2VyOiBmdW5jdGlvbiBhdXRoVXNlcihzdGF0ZSwgZ2V0dGVycywgcm9vdFN0YXRlLCByb290R2V0dGVycykgewogICAgICByZXR1cm4gcm9vdEdldHRlcnNbJ3VzZXJzL3VzZXInXShzdGF0ZS5hdXRoSWQpOwogICAgfQogIH0sCiAgYWN0aW9uczogewogICAgaW5pdEF1dGhlbnRpY2F0aW9uOiBmdW5jdGlvbiBpbml0QXV0aGVudGljYXRpb24oX3JlZikgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgdmFyIHN0YXRlID0gX3JlZi5zdGF0ZSwKICAgICAgICAgIGRpc3BhdGNoID0gX3JlZi5kaXNwYXRjaCwKICAgICAgICAgIGNvbW1pdCA9IF9yZWYuY29tbWl0OwogICAgICBpZiAoc3RhdGUuYXV0aE9ic2VydmVyVW5zdWJzY3JpYmUpIHN0YXRlLmF1dGhPYnNlcnZlclVuc3Vic2NyaWJlKCk7CiAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgdmFyIHVuc3Vic2NyaWJlID0gZ2V0QXV0aCgpLm9uQXV0aFN0YXRlQ2hhbmdlZCggLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICAgICAgICAgIHZhciBfcmVmMiA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSh1c2VyKSB7CiAgICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgICBfdGhpcy5kaXNwYXRjaCgnYXV0aC91bnN1YnNjcmliZUF1dGhVc2VyU25hcHNob3QnKTsKCiAgICAgICAgICAgICAgICAgICAgaWYgKCF1c2VyKSB7CiAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNzsKICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDQ7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLmRpc3BhdGNoKCdhdXRoL2ZldGNoQXV0aFVzZXInKTsKCiAgICAgICAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgICAgICAgICByZXModXNlcik7CiAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDg7CiAgICAgICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgICAgICBjYXNlIDc6CiAgICAgICAgICAgICAgICAgICAgcmVzKG51bGwpOwoKICAgICAgICAgICAgICAgICAgY2FzZSA4OgogICAgICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9LCBfY2FsbGVlKTsKICAgICAgICAgIH0pKTsKCiAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKF94KSB7CiAgICAgICAgICAgIHJldHVybiBfcmVmMi5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICAgICAgfTsKICAgICAgICB9KCkpOwogICAgICAgIGNvbW1pdCgic2V0QXV0aE9ic2VydmVyVW5zdWJzY3JpYmUiLCB1bnN1YnNjcmliZSk7CiAgICAgIH0pOwogICAgfSwKICAgIHJlZ2lzdGVyVXNlcldpdGhFbWFpbEFuZFBhc3N3b3JkOiBmdW5jdGlvbiByZWdpc3RlclVzZXJXaXRoRW1haWxBbmRQYXNzd29yZChfcmVmMywgX3JlZjQpIHsKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTIoKSB7CiAgICAgICAgdmFyIGRpc3BhdGNoLCBfcmVmNCRhdmF0YXIsIGF2YXRhciwgZW1haWwsIG5hbWUsIHVzZXJuYW1lLCBwYXNzd29yZCwgYXV0aCwgcmVzdWx0OwoKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTIkKF9jb250ZXh0MikgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDIucHJldiA9IF9jb250ZXh0Mi5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgZGlzcGF0Y2ggPSBfcmVmMy5kaXNwYXRjaDsKICAgICAgICAgICAgICAgIF9yZWY0JGF2YXRhciA9IF9yZWY0LmF2YXRhciwgYXZhdGFyID0gX3JlZjQkYXZhdGFyID09PSB2b2lkIDAgPyBudWxsIDogX3JlZjQkYXZhdGFyLCBlbWFpbCA9IF9yZWY0LmVtYWlsLCBuYW1lID0gX3JlZjQubmFtZSwgdXNlcm5hbWUgPSBfcmVmNC51c2VybmFtZSwgcGFzc3dvcmQgPSBfcmVmNC5wYXNzd29yZDsKICAgICAgICAgICAgICAgIGF1dGggPSBnZXRBdXRoKCk7CiAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDU7CiAgICAgICAgICAgICAgICByZXR1cm4gY3JlYXRlVXNlcldpdGhFbWFpbEFuZFBhc3N3b3JkKGF1dGgsIGVtYWlsLCBwYXNzd29yZCk7CgogICAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgICAgIHJlc3VsdCA9IF9jb250ZXh0Mi5zZW50OwogICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSA4OwogICAgICAgICAgICAgICAgcmV0dXJuIGRpc3BhdGNoKCd1c2Vycy9jcmVhdGVVc2VyJywgewogICAgICAgICAgICAgICAgICBpZDogcmVzdWx0LnVzZXIudWlkLAogICAgICAgICAgICAgICAgICBlbWFpbDogZW1haWwsCiAgICAgICAgICAgICAgICAgIG5hbWU6IG5hbWUsCiAgICAgICAgICAgICAgICAgIHVzZXJuYW1lOiB1c2VybmFtZSwKICAgICAgICAgICAgICAgICAgYXZhdGFyOiBhdmF0YXIKICAgICAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICAgICAgcm9vdDogdHJ1ZQogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgODoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlMik7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIHNpZ25JbldpdGhFbWFpbEFuZFBhc3N3b3JkOiBmdW5jdGlvbiBzaWduSW5XaXRoRW1haWxBbmRQYXNzd29yZChjb250ZXh0LCBfcmVmNSkgewogICAgICB2YXIgZW1haWwgPSBfcmVmNS5lbWFpbCwKICAgICAgICAgIHBhc3N3b3JkID0gX3JlZjUucGFzc3dvcmQ7CiAgICAgIHZhciBhdXRoID0gZ2V0QXV0aCgpOwogICAgICByZXR1cm4gX3NpZ25JbldpdGhFbWFpbEFuZFBhc3N3b3JkKGF1dGgsIGVtYWlsLCBwYXNzd29yZCk7CiAgICB9LAogICAgc2lnbkluV2l0aEdvb2dsZTogZnVuY3Rpb24gc2lnbkluV2l0aEdvb2dsZShfcmVmNikgewogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMygpIHsKICAgICAgICB2YXIgZGlzcGF0Y2gsIGNvbW1pdCwgcHJvdmlkZXIsIGF1dGgsIHJlc3BvbnNlLCB1c2VyLCB1c2VyUmVmOwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMyQoX2NvbnRleHQzKSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0My5wcmV2ID0gX2NvbnRleHQzLm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBkaXNwYXRjaCA9IF9yZWY2LmRpc3BhdGNoLCBjb21taXQgPSBfcmVmNi5jb21taXQ7CiAgICAgICAgICAgICAgICBwcm92aWRlciA9IG5ldyBHb29nbGVBdXRoUHJvdmlkZXIoKTsKICAgICAgICAgICAgICAgIGF1dGggPSBnZXRBdXRoKCk7CiAgICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDU7CiAgICAgICAgICAgICAgICByZXR1cm4gc2lnbkluV2l0aFBvcHVwKGF1dGgsIHByb3ZpZGVyKTsKCiAgICAgICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICAgICAgcmVzcG9uc2UgPSBfY29udGV4dDMuc2VudDsKICAgICAgICAgICAgICAgIHVzZXIgPSByZXNwb25zZS51c2VyOwogICAgICAgICAgICAgICAgdXNlclJlZiA9IGRvYyhkYiwgJ3VzZXJzJywgdXNlci51aWQpOwogICAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSAxMDsKICAgICAgICAgICAgICAgIHJldHVybiBnZXREb2ModXNlclJlZikudGhlbihmdW5jdGlvbiAodXNlckRvYykgewogICAgICAgICAgICAgICAgICBpZiAoIXVzZXJEb2MuZXhpc3RzKSByZXR1cm4gZGlzcGF0Y2goJ3VzZXJzL2NyZWF0ZVVzZXInLCB7CiAgICAgICAgICAgICAgICAgICAgaWQ6IHVzZXIudWlkLAogICAgICAgICAgICAgICAgICAgIGVtYWlsOiB1c2VyLmVtYWlsLAogICAgICAgICAgICAgICAgICAgIG5hbWU6IHVzZXIuZGlzcGxheU5hbWUsCiAgICAgICAgICAgICAgICAgICAgdXNlcm5hbWU6IHVzZXIuZW1haWwsCiAgICAgICAgICAgICAgICAgICAgYXZhdGFyOiB1c2VyLnBob3RvVVJMCiAgICAgICAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICAgICAgICByb290OiB0cnVlCiAgICAgICAgICAgICAgICAgIH0pO2Vsc2UgY29tbWl0KCdzZXRBdXRoSWQnLCB1c2VyLnVpZCk7CiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgY2FzZSAxMDoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0My5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlMyk7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIHNpZ25PdXQ6IGZ1bmN0aW9uIHNpZ25PdXQoX3JlZjcpIHsKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTQoKSB7CiAgICAgICAgdmFyIGNvbW1pdDsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTQkKF9jb250ZXh0NCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDQucHJldiA9IF9jb250ZXh0NC5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgY29tbWl0ID0gX3JlZjcuY29tbWl0OwogICAgICAgICAgICAgICAgX2NvbnRleHQ0Lm5leHQgPSAzOwogICAgICAgICAgICAgICAgcmV0dXJuIGdldEF1dGgoKS5zaWduT3V0KCk7CgogICAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICAgIGNvbW1pdCgnc2V0QXV0aElkJywgbnVsbCk7CgogICAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlNCk7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIGZldGNoQXV0aFVzZXI6IGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIF9mZXRjaEF1dGhVc2VyID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlNShfcmVmOCkgewogICAgICAgIHZhciBfZ2V0QXV0aCRjdXJyZW50VXNlcjsKCiAgICAgICAgdmFyIGRpc3BhdGNoLCBzdGF0ZSwgY29tbWl0LCB1c2VySWQ7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU1JChfY29udGV4dDUpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQ1LnByZXYgPSBfY29udGV4dDUubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIGRpc3BhdGNoID0gX3JlZjguZGlzcGF0Y2gsIHN0YXRlID0gX3JlZjguc3RhdGUsIGNvbW1pdCA9IF9yZWY4LmNvbW1pdDsKICAgICAgICAgICAgICAgIF9jb250ZXh0NS5uZXh0ID0gMzsKICAgICAgICAgICAgICAgIHJldHVybiAoX2dldEF1dGgkY3VycmVudFVzZXIgPSBnZXRBdXRoKCkuY3VycmVudFVzZXIpID09PSBudWxsIHx8IF9nZXRBdXRoJGN1cnJlbnRVc2VyID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfZ2V0QXV0aCRjdXJyZW50VXNlci51aWQ7CgogICAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICAgIHVzZXJJZCA9IF9jb250ZXh0NS5zZW50OwoKICAgICAgICAgICAgICAgIGlmICh1c2VySWQpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQ1Lm5leHQgPSA2OwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ1LmFicnVwdCgicmV0dXJuIik7CgogICAgICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgICAgICAgIF9jb250ZXh0NS5uZXh0ID0gODsKICAgICAgICAgICAgICAgIHJldHVybiBkaXNwYXRjaCgnZmV0Y2hJdGVtJywgewogICAgICAgICAgICAgICAgICBlbW9qaTogJ/CfmYsnLAogICAgICAgICAgICAgICAgICByZXNvdXJjZTogJ3VzZXJzJywKICAgICAgICAgICAgICAgICAgaWQ6IHVzZXJJZCwKICAgICAgICAgICAgICAgICAgaGFuZGxlVW5zdWJzY3JpYmU6IGZ1bmN0aW9uIGhhbmRsZVVuc3Vic2NyaWJlKHVuc3Vic2NyaWJlKSB7CiAgICAgICAgICAgICAgICAgICAgY29tbWl0KCdzZXRBdXRoVXNlclVuc3Vic2NyaWJlJywgdW5zdWJzY3JpYmUpOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgICAgIHJvb3Q6IHRydWUKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDg6CiAgICAgICAgICAgICAgICBjb21taXQoJ3NldEF1dGhJZCcsIHVzZXJJZCk7CgogICAgICAgICAgICAgIGNhc2UgOToKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NS5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlNSk7CiAgICAgIH0pKTsKCiAgICAgIGZ1bmN0aW9uIGZldGNoQXV0aFVzZXIoX3gyKSB7CiAgICAgICAgcmV0dXJuIF9mZXRjaEF1dGhVc2VyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgIH0KCiAgICAgIHJldHVybiBmZXRjaEF1dGhVc2VyOwogICAgfSgpLAogICAgZmV0Y2hBdXRoVXNlcnNQb3N0czogZnVuY3Rpb24gZmV0Y2hBdXRoVXNlcnNQb3N0cyhfcmVmOSwgX3JlZjEwKSB7CiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU2KCkgewogICAgICAgIHZhciBjb21taXQsIHN0YXRlLCBsYXN0UG9zdCwgcG9zdHNSZWYsIHBvc3RzUXVlcnksIHBvc3RzLCBuZXh0LCBfcG9zdHMsIF9wb3N0czI7CgogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlNiQoX2NvbnRleHQ2KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Ni5wcmV2ID0gX2NvbnRleHQ2Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBjb21taXQgPSBfcmVmOS5jb21taXQsIHN0YXRlID0gX3JlZjkuc3RhdGU7CiAgICAgICAgICAgICAgICBsYXN0UG9zdCA9IF9yZWYxMC5sYXN0UG9zdDsKICAgICAgICAgICAgICAgIF9jb250ZXh0Ni5uZXh0ID0gNDsKICAgICAgICAgICAgICAgIHJldHVybiBjb2xsZWN0aW9uKGRiLCAicG9zdHMiKTsKCiAgICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgICAgcG9zdHNSZWYgPSBfY29udGV4dDYuc2VudDsKICAgICAgICAgICAgICAgIF9jb250ZXh0Ni5uZXh0ID0gNzsKICAgICAgICAgICAgICAgIHJldHVybiBnZXREb2NzKHF1ZXJ5KHBvc3RzUmVmLCB3aGVyZSgidXNlcklkIiwgIj09Iiwgc3RhdGUuYXV0aElkKSwgb3JkZXJCeSgicHVibGlzaGVkQXQiLCAiZGVzYyIpLCBsaW1pdCgxMCkpKTsKCiAgICAgICAgICAgICAgY2FzZSA3OgogICAgICAgICAgICAgICAgcG9zdHNRdWVyeSA9IF9jb250ZXh0Ni5zZW50OwogICAgICAgICAgICAgICAgcG9zdHMgPSBbXTsKCiAgICAgICAgICAgICAgICBpZiAoIWxhc3RQb3N0KSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Ni5uZXh0ID0gMTc7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIG5leHQgPSBxdWVyeShwb3N0c1F1ZXJ5LnF1ZXJ5LCBzdGFydEFmdGVyKGxhc3RQb3N0KSk7CiAgICAgICAgICAgICAgICBfY29udGV4dDYubmV4dCA9IDEzOwogICAgICAgICAgICAgICAgcmV0dXJuIGdldERvY3MobmV4dCk7CgogICAgICAgICAgICAgIGNhc2UgMTM6CiAgICAgICAgICAgICAgICBfcG9zdHMgPSBfY29udGV4dDYuc2VudDsKCiAgICAgICAgICAgICAgICBfcG9zdHMuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSkgewogICAgICAgICAgICAgICAgICBjb21taXQoJ3NldEl0ZW0nLCB7CiAgICAgICAgICAgICAgICAgICAgcmVzb3VyY2U6ICdwb3N0cycsCiAgICAgICAgICAgICAgICAgICAgaXRlbTogaXRlbQogICAgICAgICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgICAgICAgcm9vdDogdHJ1ZQogICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgIF9jb250ZXh0Ni5uZXh0ID0gMTk7CiAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgY2FzZSAxNzoKICAgICAgICAgICAgICAgIF9wb3N0czIgPSBwb3N0c1F1ZXJ5OwoKICAgICAgICAgICAgICAgIF9wb3N0czIuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSkgewogICAgICAgICAgICAgICAgICBjb21taXQoJ3NldEl0ZW0nLCB7CiAgICAgICAgICAgICAgICAgICAgcmVzb3VyY2U6ICdwb3N0cycsCiAgICAgICAgICAgICAgICAgICAgaXRlbTogaXRlbQogICAgICAgICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgICAgICAgcm9vdDogdHJ1ZQogICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDE5OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ2LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWU2KTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgdW5zdWJzY3JpYmVBdXRoVXNlclNuYXBzaG90OiBmdW5jdGlvbiB1bnN1YnNjcmliZUF1dGhVc2VyU25hcHNob3QoX3JlZjExKSB7CiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU3KCkgewogICAgICAgIHZhciBzdGF0ZSwgY29tbWl0OwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlNyQoX2NvbnRleHQ3KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Ny5wcmV2ID0gX2NvbnRleHQ3Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBzdGF0ZSA9IF9yZWYxMS5zdGF0ZSwgY29tbWl0ID0gX3JlZjExLmNvbW1pdDsKCiAgICAgICAgICAgICAgICBpZiAoc3RhdGUuYXV0aFVzZXJVbnN1YnNjcmliZSkgewogICAgICAgICAgICAgICAgICBzdGF0ZS5hdXRoVXNlclVuc3Vic2NyaWJlKCk7CiAgICAgICAgICAgICAgICAgIGNvbW1pdCgnc2V0QXV0aFVzZXJVbnN1YnNjcmliZScsIG51bGwpOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDcuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTcpOwogICAgICB9KSkoKTsKICAgIH0KICB9LAogIG11dGF0aW9uczogewogICAgc2V0QXV0aElkOiBmdW5jdGlvbiBzZXRBdXRoSWQoc3RhdGUsIGlkKSB7CiAgICAgIHN0YXRlLmF1dGhJZCA9IGlkOwogICAgfSwKICAgIHNldEF1dGhVc2VyVW5zdWJzY3JpYmU6IGZ1bmN0aW9uIHNldEF1dGhVc2VyVW5zdWJzY3JpYmUoc3RhdGUsIHVuc3Vic2NyaWJlKSB7CiAgICAgIHN0YXRlLmF1dGhVc2VyVW5zdWJzY3JpYmUgPSB1bnN1YnNjcmliZTsKICAgIH0sCiAgICBzZXRBdXRoT2JzZXJ2ZXJVbnN1YnNjcmliZTogZnVuY3Rpb24gc2V0QXV0aE9ic2VydmVyVW5zdWJzY3JpYmUoc3RhdGUsIHVuc3Vic2NyaWJlKSB7CiAgICAgIHN0YXRlLmF1dGhPYnNlcnZlclVuc3Vic2NyaWJlID0gdW5zdWJzY3JpYmU7CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["C:/dev/farming-forum/src/store/modules/auth.js"],"names":["GoogleAuthProvider","createUserWithEmailAndPassword","getAuth","signInWithEmailAndPassword","signInWithPopup","collection","doc","getDoc","getDocs","limit","orderBy","query","startAfter","where","db","namespaced","state","authId","authUserUnsubscribe","authObserverUnsubscribe","getters","authUser","rootState","rootGetters","actions","initAuthentication","dispatch","commit","Promise","res","unsubscribe","onAuthStateChanged","user","registerUserWithEmailAndPassword","avatar","email","name","username","password","auth","result","id","uid","root","context","signInWithGoogle","provider","response","userRef","then","userDoc","exists","displayName","photoURL","signOut","fetchAuthUser","currentUser","userId","emoji","resource","handleUnsubscribe","fetchAuthUsersPosts","lastPost","postsRef","postsQuery","posts","next","forEach","item","unsubscribeAuthUserSnapshot","mutations","setAuthId","setAuthUserUnsubscribe","setAuthObserverUnsubscribe"],"mappings":"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","sourcesContent":["import { GoogleAuthProvider, createUserWithEmailAndPassword, getAuth, signInWithEmailAndPassword, signInWithPopup } from \"firebase/auth\"\r\nimport {collection, doc, getDoc, getDocs, limit, orderBy, query, startAfter, where} from \"firebase/firestore\"\r\n\r\nimport { db } from '../../main'\r\n\r\nexport default {\r\n  namespaced: true,\r\n  state: {\r\n    authId: null,\r\n    authUserUnsubscribe: null,\r\n    authObserverUnsubscribe: null\r\n  },\r\n  getters: {\r\n    authUser: (state, getters, rootState, rootGetters) => {\r\n      return rootGetters['users/user'](state.authId)\r\n    },\r\n  },\r\n  actions: {\r\n    initAuthentication({state, dispatch, commit}) {\r\n      if (state.authObserverUnsubscribe) state.authObserverUnsubscribe()\r\n      return new Promise((res) => {\r\n        const unsubscribe = getAuth().onAuthStateChanged(async (user) => {\r\n          this.dispatch('auth/unsubscribeAuthUserSnapshot')\r\n          if (user) {\r\n            await this.dispatch('auth/fetchAuthUser')\r\n            res(user)\r\n          } else {\r\n            res(null)\r\n          }\r\n        })\r\n        commit(\"setAuthObserverUnsubscribe\", unsubscribe)\r\n      })\r\n    },\r\n\r\n    async registerUserWithEmailAndPassword({ dispatch }, {avatar = null, email, name, username, password }) {\r\n      const auth = getAuth();\r\n      const result = await createUserWithEmailAndPassword(\r\n        auth,\r\n        email,\r\n        password\r\n      )\r\n      await dispatch('users/createUser', { id: result.user.uid, email, name, username, avatar }, {root: true} )\r\n    },\r\n    signInWithEmailAndPassword(context, {email, password}) {\r\n      const auth = getAuth()\r\n      return signInWithEmailAndPassword(auth, email, password)\r\n    },\r\n    async signInWithGoogle({dispatch, commit}) {\r\n      const provider = new GoogleAuthProvider();\r\n      const auth = getAuth();\r\n      const response = await signInWithPopup(auth, provider)\r\n      const user = response.user;\r\n      const userRef = doc(db, 'users', user.uid)\r\n      await getDoc(userRef).then((userDoc) => {\r\n        if (!userDoc.exists)\r\n          return dispatch('users/createUser', {id: user.uid, email: user.email, name: user.displayName, username: user.email, avatar: user.photoURL}, {root: true} )\r\n        else \r\n          commit('setAuthId', user.uid)\r\n      })\r\n    },\r\n    async signOut({commit}) {\r\n      await getAuth().signOut()\r\n      commit('setAuthId', null)\r\n    },\r\n\r\n    fetchAuthUser: async ({ dispatch, state, commit }) => {\r\n      const userId = await getAuth().currentUser?.uid\r\n      if (!userId) return\r\n      await dispatch('fetchItem', { emoji:'🙋', resource: 'users', id: userId, handleUnsubscribe: (unsubscribe) => {\r\n        commit('setAuthUserUnsubscribe', unsubscribe)\r\n      }}, {root: true} )\r\n      commit('setAuthId', userId)\r\n    },\r\n    async fetchAuthUsersPosts ({ commit, state }, {lastPost}) {\r\n      const postsRef = await collection(db, \"posts\")\r\n      let postsQuery = await getDocs(query(postsRef, where(\"userId\", \"==\", state.authId), orderBy(\"publishedAt\", \"desc\"), limit(10)))\r\n      const posts = []\r\n      if (lastPost) {\r\n        const next = query(postsQuery.query, startAfter(lastPost))\r\n        const posts = await getDocs(next)\r\n        posts.forEach(item => {\r\n        commit('setItem', { resource: 'posts', item }, {root: true})\r\n        })\r\n      } else {\r\n        const posts = postsQuery\r\n        posts.forEach(item => {\r\n          commit('setItem', { resource: 'posts', item }, {root: true})\r\n          })\r\n      }\r\n    },\r\n    async unsubscribeAuthUserSnapshot ({ state, commit }) {\r\n      if (state.authUserUnsubscribe) {\r\n        state.authUserUnsubscribe()\r\n        commit('setAuthUserUnsubscribe', null)        \r\n      }\r\n    }\r\n  },\r\n  mutations: {\r\n    setAuthId(state, id) {\r\n      state.authId = id\r\n    },\r\n    setAuthUserUnsubscribe (state, unsubscribe) {\r\n      state.authUserUnsubscribe = unsubscribe\r\n    },\r\n    setAuthObserverUnsubscribe (state, unsubscribe) {\r\n      state.authObserverUnsubscribe = unsubscribe\r\n    },\r\n  }\r\n}"]}]}